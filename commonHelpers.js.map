{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/index.js"],"sourcesContent":["import axios from \"axios\";\n\nconst APY_KEY = 'live_XoqBpjBOBhi4Mxp0uAtNPBYMKHC2s7AGJH7hzvpnhXAnjlaQH6QuAJzfktubymDJ'\naxios.defaults.headers.common[\"x-api-key\"] = APY_KEY;\n\nconst HOST = 'https://api.thecatapi.com/v1'\n\nfunction errorHandler(error) {\n    console.error(error)\n    return Promise.reject(error)\n}\n\nexport function fetchBreeds() {\n    return axios.get(`${HOST}/breeds`)\n        .then(response => response.data)\n        .catch(errorHandler)\n}\n\nexport function fetchCatByBreed(breedId) {\n    if (!breedId) {\n        return Promise.resolve([])\n    }\n    return axios.get(`${HOST}/images/search?breed_ids=${breedId}`)\n        .then(response => response.data)\n        .catch(errorHandler)\n}","import { fetchBreeds, fetchCatByBreed } from './js/cat-api'\nimport iziToast from 'izitoast'\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport './css/slimselect.css'\nimport SlimSelect from 'slim-select'\n\nconst selectors = {\n    breeds: document.querySelector('select.breed-select'),\n    catInfo: document.querySelector('div.cat-info'),\n    loader: document.querySelector('span.loader')\n}\n\n\n\n// markups\nfunction markupBreedOption(breeds) {\n    return breeds.map(\n        breed => `<option value=\"${breed.id}\">${breed.name}</option>`\n    ).join('')\n}\n\nfunction markupCatInfo(cat) {\n    return `\n    <div class=\"cat-row\">\n        <img src=\"${cat.url}\" alt=\"${cat.breeds[0].name}\" width=\"300px\" heigth=\"200px\">\n        <div class=\"cat-text-block\">\n            <h2>${cat.breeds[0].name}</h2>\n            <p>${cat.breeds[0].description}</p>\n            <strong>Temperament:</strong> ${cat.breeds[0].temperament}<br>\n        </div>\n    </div>\n    `\n}\n\n\n\n// functions\nfunction loadingStatus(isLoading) {\n    if (isLoading) {\n        selectors.loader.classList.remove('hidden')\n        selectors.breeds.classList.add('hidden')\n    } else {\n        selectors.loader.classList.add('hidden')\n        selectors.breeds.classList.remove('hidden')\n    }\n}\n\nfunction sendError() {\n  iziToast.error({\n    message: 'Oops! Something went wrong! Try reloading the page!',\n    position: \"topCenter\",\n    transitionIn: 'fadeInDown'\n  });\n}\n\n\n\n// event handlers\nfunction handleBreedChange(event) {\n    const breedId = event.target.value\n    selectors.catInfo.innerHTML = ''\n    loadingStatus(true)\n    fetchCatByBreed(breedId).then(\n        data => {\n            loadingStatus(false)\n            selectors.catInfo.innerHTML = markupCatInfo(data[0])\n        }\n    )\n    .catch(\n        error => {\n            console.error(error)\n            loadingStatus(false)\n            sendError()\n        }\n    )\n\n}\n\n\n\n// main code\nloadingStatus(true)\n\nfetchBreeds()\n    .then(\n        data => {\n            loadingStatus(false)\n            selectors.breeds.innerHTML = markupBreedOption(data)\n            new SlimSelect({\n                select: selectors.breeds,\n                settings: {\n                    contentLocation: document.getElementById('local')\n                }\n            })\n        }\n    )\n    .catch(\n        error => {\n            loadingStatus(false)\n            console.error(error)\n            sendError()\n        }\n    )\n\nselectors.breeds.addEventListener('change', handleBreedChange)"],"names":["APY_KEY","axios","HOST","errorHandler","error","fetchBreeds","response","fetchCatByBreed","breedId","selectors","markupBreedOption","breeds","breed","markupCatInfo","cat","loadingStatus","isLoading","sendError","iziToast","handleBreedChange","event","data","SlimSelect"],"mappings":"+vBAEA,MAAMA,EAAU,wEAChBC,EAAM,SAAS,QAAQ,OAAO,aAAeD,EAE7C,MAAME,EAAO,+BAEb,SAASC,EAAaC,EAAO,CACzB,eAAQ,MAAMA,CAAK,EACZ,QAAQ,OAAOA,CAAK,CAC/B,CAEO,SAASC,GAAc,CAC1B,OAAOJ,EAAM,IAAI,GAAGC,UAAa,EAC5B,KAAKI,GAAYA,EAAS,IAAI,EAC9B,MAAMH,CAAY,CAC3B,CAEO,SAASI,EAAgBC,EAAS,CACrC,OAAKA,EAGEP,EAAM,IAAI,GAAGC,6BAAgCM,GAAS,EACxD,KAAKF,GAAYA,EAAS,IAAI,EAC9B,MAAMH,CAAY,EAJZ,QAAQ,QAAQ,EAAE,CAKjC,CCnBA,MAAMM,EAAY,CACd,OAAQ,SAAS,cAAc,qBAAqB,EACpD,QAAS,SAAS,cAAc,cAAc,EAC9C,OAAQ,SAAS,cAAc,aAAa,CAChD,EAKA,SAASC,EAAkBC,EAAQ,CAC/B,OAAOA,EAAO,IACVC,GAAS,kBAAkBA,EAAM,OAAOA,EAAM,eACtD,EAAM,KAAK,EAAE,CACb,CAEA,SAASC,EAAcC,EAAK,CACxB,MAAO;AAAA;AAAA,oBAESA,EAAI,aAAaA,EAAI,OAAO,GAAG;AAAA;AAAA,kBAEjCA,EAAI,OAAO,GAAG;AAAA,iBACfA,EAAI,OAAO,GAAG;AAAA,4CACaA,EAAI,OAAO,GAAG;AAAA;AAAA;AAAA,KAI1D,CAKA,SAASC,EAAcC,EAAW,CAC1BA,GACAP,EAAU,OAAO,UAAU,OAAO,QAAQ,EAC1CA,EAAU,OAAO,UAAU,IAAI,QAAQ,IAEvCA,EAAU,OAAO,UAAU,IAAI,QAAQ,EACvCA,EAAU,OAAO,UAAU,OAAO,QAAQ,EAElD,CAEA,SAASQ,GAAY,CACnBC,EAAS,MAAM,CACb,QAAS,sDACT,SAAU,YACV,aAAc,YAClB,CAAG,CACH,CAKA,SAASC,EAAkBC,EAAO,CAC9B,MAAMZ,EAAUY,EAAM,OAAO,MAC7BX,EAAU,QAAQ,UAAY,GAC9BM,EAAc,EAAI,EAClBR,EAAgBC,CAAO,EAAE,KACrBa,GAAQ,CACJN,EAAc,EAAK,EACnBN,EAAU,QAAQ,UAAYI,EAAcQ,EAAK,EAAE,CACtD,CACJ,EACA,MACGjB,GAAS,CACL,QAAQ,MAAMA,CAAK,EACnBW,EAAc,EAAK,EACnBE,EAAW,CACd,CACJ,CAEL,CAKAF,EAAc,EAAI,EAElBV,EAAa,EACR,KACGgB,GAAQ,CACJN,EAAc,EAAK,EACnBN,EAAU,OAAO,UAAYC,EAAkBW,CAAI,EACnD,IAAIC,EAAW,CACX,OAAQb,EAAU,OAClB,SAAU,CACN,gBAAiB,SAAS,eAAe,OAAO,CACnD,CACjB,CAAa,CACJ,CACJ,EACA,MACGL,GAAS,CACLW,EAAc,EAAK,EACnB,QAAQ,MAAMX,CAAK,EACnBa,EAAW,CACd,CACJ,EAELR,EAAU,OAAO,iBAAiB,SAAUU,CAAiB"}