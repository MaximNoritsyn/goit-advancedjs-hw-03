{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/index.js"],"sourcesContent":["import axios from \"axios\";\n\nconst APY_KEY = 'live_XoqBpjBOBhi4Mxp0uAtNPBYMKHC2s7AGJH7hzvpnhXAnjlaQH6QuAJzfktubymDJ'\naxios.defaults.headers.common[\"x-api-key\"] = APY_KEY;\n\nconst HOST = 'https://api.thecatapi.com/v1'\n\nfunction errorHandler(error) {\n    console.error(error)\n    return Promise.reject(error)\n}\n\nexport function fetchBreeds() {\n    return axios.get(`${HOST}/breeds`)\n        .then(response => response.data)\n        .catch(errorHandler)\n}\n\nexport function fetchCatByBreed(breedId) {\n    if (!breedId) {\n        return Promise.resolve([])\n    }\n    return axios.get(`${HOST}/images/search?breed_ids=${breedId}`)\n        .then(response => response.data)\n        .catch(errorHandler)\n}","import { fetchBreeds, fetchCatByBreed } from './js/cat-api'\n\nconst selectors = {\n    breeds: document.querySelector('select.breed-select'),\n    catInfo: document.querySelector('div.cat-info'),\n    loader: document.querySelector('p.loader'),\n    error: document.querySelector('p.error')\n}\n\n// markups\n\nfunction markupBreedOption(breeds) {\n    return breeds.map(\n        breed => `<option value=\"${breed.id}\">${breed.name}</option>`\n    ).join('')\n}\n\nfunction markupCatInfo(cat) {\n    return `\n        <h2>${cat.breeds[0].name}</h2>\n        <img src=\"${cat.url}\" alt=\"${cat.breeds[0].name}\" width=\"200px\">\n        <p>${cat.breeds[0].description}</p>\n    `\n}\n\n\n// functions\nfunction loadingStatus(isLoading) {\n    if (isLoading) {\n        selectors.loader.classList.remove('hidden')\n        selectors.breeds.classList.add('hidden')\n    } else {\n        selectors.loader.classList.add('hidden')\n        selectors.breeds.classList.remove('hidden')\n    }\n}\n\nfunction errorStatus(isError) {\n    if (isError) {\n        selectors.error.classList.remove('hidden')\n    } else {\n        selectors.error.classList.add('hidden')\n    }\n}\n\n\n// event handlers\nfunction handleBreedChange(event) {\n    const breedId = event.target.value\n    selectors.catInfo.innerHTML = ''\n    loadingStatus(true)\n    fetchCatByBreed(breedId).then(\n        data => {\n            loadingStatus(false)\n            selectors.catInfo.innerHTML = markupCatInfo(data[0])\n        }\n    )\n    .catch(\n        error => {\n            console.error(error)\n            loadingStatus(false)\n            errorStatus(true)\n        }\n    )\n\n}\n\n\n// main code\n\nloadingStatus(false)\nerrorStatus(false)\n\nfetchBreeds()\n    .then(\n        data => {\n            selectors.breeds.innerHTML = markupBreedOption(data)\n        }\n    )\n    .catch(\n        error => {\n            console.error(error)\n            errorStatus(true)\n        }\n    )\n\nselectors.breeds.addEventListener('change', handleBreedChange)"],"names":["APY_KEY","axios","HOST","errorHandler","error","fetchBreeds","response","fetchCatByBreed","breedId","selectors","markupBreedOption","breeds","breed","markupCatInfo","cat","loadingStatus","isLoading","errorStatus","isError","handleBreedChange","event","data"],"mappings":"svBAEA,MAAMA,EAAU,wEAChBC,EAAM,SAAS,QAAQ,OAAO,aAAeD,EAE7C,MAAME,EAAO,+BAEb,SAASC,EAAaC,EAAO,CACzB,eAAQ,MAAMA,CAAK,EACZ,QAAQ,OAAOA,CAAK,CAC/B,CAEO,SAASC,GAAc,CAC1B,OAAOJ,EAAM,IAAI,GAAGC,UAAa,EAC5B,KAAKI,GAAYA,EAAS,IAAI,EAC9B,MAAMH,CAAY,CAC3B,CAEO,SAASI,EAAgBC,EAAS,CACrC,OAAKA,EAGEP,EAAM,IAAI,GAAGC,6BAAgCM,GAAS,EACxD,KAAKF,GAAYA,EAAS,IAAI,EAC9B,MAAMH,CAAY,EAJZ,QAAQ,QAAQ,EAAE,CAKjC,CCvBA,MAAMM,EAAY,CACd,OAAQ,SAAS,cAAc,qBAAqB,EACpD,QAAS,SAAS,cAAc,cAAc,EAC9C,OAAQ,SAAS,cAAc,UAAU,EACzC,MAAO,SAAS,cAAc,SAAS,CAC3C,EAIA,SAASC,EAAkBC,EAAQ,CAC/B,OAAOA,EAAO,IACVC,GAAS,kBAAkBA,EAAM,OAAOA,EAAM,eACtD,EAAM,KAAK,EAAE,CACb,CAEA,SAASC,EAAcC,EAAK,CACxB,MAAO;AAAA,cACGA,EAAI,OAAO,GAAG;AAAA,oBACRA,EAAI,aAAaA,EAAI,OAAO,GAAG;AAAA,aACtCA,EAAI,OAAO,GAAG;AAAA,KAE3B,CAIA,SAASC,EAAcC,EAAW,CAC1BA,GACAP,EAAU,OAAO,UAAU,OAAO,QAAQ,EAC1CA,EAAU,OAAO,UAAU,IAAI,QAAQ,IAEvCA,EAAU,OAAO,UAAU,IAAI,QAAQ,EACvCA,EAAU,OAAO,UAAU,OAAO,QAAQ,EAElD,CAEA,SAASQ,EAAYC,EAAS,CACtBA,EACAT,EAAU,MAAM,UAAU,OAAO,QAAQ,EAEzCA,EAAU,MAAM,UAAU,IAAI,QAAQ,CAE9C,CAIA,SAASU,EAAkBC,EAAO,CAC9B,MAAMZ,EAAUY,EAAM,OAAO,MAC7BX,EAAU,QAAQ,UAAY,GAC9BM,EAAc,EAAI,EAClBR,EAAgBC,CAAO,EAAE,KACrBa,GAAQ,CACJN,EAAc,EAAK,EACnBN,EAAU,QAAQ,UAAYI,EAAcQ,EAAK,EAAE,CACtD,CACJ,EACA,MACGjB,GAAS,CACL,QAAQ,MAAMA,CAAK,EACnBW,EAAc,EAAK,EACnBE,EAAY,EAAI,CACnB,CACJ,CAEL,CAKAF,EAAc,EAAK,EACnBE,EAAY,EAAK,EAEjBZ,EAAa,EACR,KACGgB,GAAQ,CACJZ,EAAU,OAAO,UAAYC,EAAkBW,CAAI,CACtD,CACJ,EACA,MACGjB,GAAS,CACL,QAAQ,MAAMA,CAAK,EACnBa,EAAY,EAAI,CACnB,CACJ,EAELR,EAAU,OAAO,iBAAiB,SAAUU,CAAiB"}